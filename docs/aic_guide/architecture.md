# Архитектура WinStore

Архитектура WinStore разработана в соответствии с принципами "Абсурдно Идеального Кода", где основное внимание уделяется четкому разделению ответственности, масштабируемости и простоте.

## Обзор компонентов

Система состоит из следующих ключевых компонентов, работающих вместе в среде Docker:

*   **Nginx:** Выступает в качестве обратного прокси и веб-сервера. Он обрабатывает все входящие HTTP-запросы, обслуживает статический фронтенд-контент и направляет запросы к API бэкенда и CMS Directus.

*   **Frontend:** На данный момент представляет собой простые HTML/CSS/JavaScript файлы. В будущем планируется переход на React/Next.js для создания более динамичного и интерактивного пользовательского интерфейса.

*   **Backend (Django):** Ядро приложения, реализующее всю бизнес-логику. Оно предоставляет REST API для фронтенда и взаимодействует с базой данных. Бэкенд построен на Django и Django REST Framework.

*   **Database (SQL Server/Oracle):** Центральное хранилище данных. Проект поддерживает как Microsoft SQL Server, так и Oracle. База данных спроектирована так, чтобы сосредоточиться на хранении данных и обеспечении их целостности, в то время как бизнес-логика вынесена в приложение.

*   **Directus:** Headless CMS, которая напрямую подключена к базе данных. Она предоставляет удобный административный интерфейс для управления контентом, таким как продукты, категории и заказы.

## Взаимодействие компонентов

1.  Пользователь заходит на сайт. Nginx отдает статические файлы фронтенда.
2.  Фронтенд (через JavaScript) делает запросы к API бэкенда для получения данных (например, списка продуктов).
3.  Nginx перенаправляет эти запросы к Django-приложению.
4.  Django обрабатывает запрос, при необходимости обращаясь к базе данных, и возвращает данные в формате JSON.
5.  Администраторы используют интерфейс Directus для управления данными. Directus напрямую читает и пишет в ту же базу данных, что и Django, обеспечивая синхронизацию данных.

## Ключевые архитектурные решения

*   **Разделение ответственности:** Строгое разделение между базой данных (хранение) и приложением (логика), как описано в [ADR-001](/.github/copilot_memory_bank/adrs/ADR-001_Business_Logic_To_App_Layer.md).
*   **Гибридная административная панель:** Использование Directus в качестве готового решения для администрирования позволило ускорить разработку, как описано в [ADR-011](/.github/copilot_memory_bank/adrs/ADR-011_Hybrid_Admin_Panel.md).
*   **Поддержка нескольких СУБД:** Архитектура спроектирована так, чтобы поддерживать как MS SQL, так и Oracle, что обеспечивает гибкость при развертывании. Подробнее в [ADR-010](/.github/copilot_memory_bank/adrs/ADR-010_Multi_DB_Support.md).

## Ссылки на детальную документацию

*   **[docker-compose.yml](../../docker-compose.yml):** Определяет все сервисы и их взаимодействие.
*   **[Nginx Configuration](../../nginx/nginx.conf):** Конфигурация маршрутизации запросов.
*   **[Django Settings](../../backend/config/settings.py):** Настройки Django-проекта, включая подключение к базе данных.
