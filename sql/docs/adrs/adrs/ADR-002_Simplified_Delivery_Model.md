# ADR-002: Упрощение модели данных для системы доставки

## Статус

Принято (2025-05-09)

## Контекст

Изначально рассматривалась или существовала модель доставки, где информация о доставке (`Delivery`) была привязана к каждой позиции заказа (`OrderItems_ID`), что позволяло отслеживать доставку каждой части заказа индивидуально. Однако, бизнес-требования указывают, что склад один и товары чаще всего доставляются вместе в рамках одного заказа.

## Рассмотренные варианты

1. **Оставить детализированную модель доставки (таблица `Delivery` связана с `OrderItems`):** Максимальная гибкость для отслеживания каждой позиции, но избыточна для основного сценария.

2. **Упрощенная модель доставки (информация о доставке как атрибуты заказа):** Таблица `Delivery` удаляется, основные поля доставки добавляются непосредственно в таблицу `Orders`.

## Принятое решение

Выбран Вариант 2. Таблица `Delivery` удалена. Поля `delivery_ADDRESS`, `shipped_DATE`, `estimated_delivery_DATE`, `actual_delivery_DATE`, `delivery_STATUS_ID`, `shipping_carrier_NAME`, `tracking_NUMBER` добавлены в таблицу `Orders`.

## Обоснование

* **Соответствие "Absurdly Ideal Code" (KISS, Минимализм):** Структура БД упрощается, устраняется избыточная таблица и связи для сценария, который не является основным.
* **Производительность:** Запросы для получения информации о доставке заказа упрощаются (нет необходимости в JOIN с отдельной таблицей `Delivery`).
* **Соответствие бизнес-требованиям:** Новая структура лучше отражает реальные процессы доставки (один заказ – одна основная отправка).

## Последствия

* Если в будущем возникнет необходимость в более гранулярном отслеживании частей заказа, потребуется рефакторинг и возможное введение таблицы для "отправлений" (Shipments).
* Прикладной уровень должен быть адаптирован для работы с новой структурой хранения информации о доставке.
